{
  "name": "junkman/api",
  "package_classes": [
    {
      "class": "junkman\\components\\JunkmanRepository",
      "interface": "junkman\\interfaces\\IJunkmanRepository"
    },
    {
      "class": "junkman\\components\\JunkmanRepository",
      "interface": "junkmanRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillRepository",
      "interface": "junkman\\interfaces\\skills\\ISkillRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillRepository",
      "interface": "skillRepository"
    },
    {
      "class": "junkman\\components\\locations\\LocationRepository",
      "interface": "junkman\\interfaces\\locations\\ILocationRepository"
    },
    {
      "class": "junkman\\components\\locations\\LocationRepository",
      "interface": "locationRepository"
    }
  ],
  "plugins": [
    {
      "class": [
        "junkman\\components\\plugins\\PluginInstallJunkmen",
        "junkman\\components\\plugins\\PluginInstallSkills",
        "junkman\\components\\plugins\\PluginInstallLocations"
      ],
      "stage": "extas.install"
    },
    {
      "class": "junkman\\components\\plugins\\junkman\\AttachDefaultSkills",
      "stage": "extas.junkmen.create.before"
    },
    {
      "class": "extas\\components\\plugins\\PluginFieldsDefaults",
      "stage": "junkman.self.init"
    }
  ],
  "extensions": [
    {
      "class": "extas\\components\\extensions\\ExtensionRepositoryGet",
      "interface": "extas\\interfaces\\extensions\\IExtensionRepositoryGet",
      "subject": "*",
      "methods": [
        "skillRepository",
        "junkman\\interfaces\\skills\\ISkillRepository",
        "junkmanRepository",
        "junkman\\interfaces\\IJunkmanRepository",
        "locationRepository",
        "junkman\\interfaces\\locations\\ILocationRepository"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionHealth",
      "interface": "junkman\\interfaces\\extensions\\IExtensionHealth",
      "subject": "junkman.self",
      "methods": [
        "getCurrentHealth",
        "getCurrentHealthRegeneration",
        "getMaxHealth",
        "getLostHealth",
        "incHealth",
        "decHealth",
        "incMaxHealth",
        "decMaxHealth",
        "incHealthRegeneration",
        "decHealthRegeneration",
        "isDead"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionMoveToLocation",
      "interface": "junkman\\interfaces\\extensions\\IExtensionMoveToLocation",
      "subject": "junkman.self",
      "methods": [
        "moveToLocation"
      ]
    }
  ],
  "junkman_locations": [
    {
      "name": "butterfly_nii_cabinet_671",
      "title": "Кабинет №671 заброшенного НИИ 'Бабочка'",
      "description": "Довольно просторный кабинет с множеством тумбочек и шкафов. Наверное, там есть чем поживиться!",
      "parameters": {
        "f_min": {
          "name": "f_min",
          "value": 0
        },
        "f_max": {
          "name": "f_max",
          "value": 99
        }
      },
      "adjacent_locations": {
        "butterfly_nii_stage_6_hall": {
          "location_name": "butterfly_nii_stage_6_hall",
          "class": "junkman\\components\\locations\\AdjacentDoorOpen"
        }
      }
    },
    {
      "name": "butterfly_nii_stage_6_hall",
      "title": "Холл 6 этажа заброшенного НИИ 'Бабочка'",
      "description": "Узкий коридор с облупившейся краской на стенах, пара уцелевших ламп мерцают, подпитываемые непонятно каким генератором.",
      "parameters": {
        "f_min": {
          "name": "f_min",
          "value": 100
        },
        "f_max": {
          "name": "f_max",
          "value": 200
        }
      },
      "adjacent_locations": {
        "butterfly_nii_cabinet_671": {
          "location_name": "butterfly_nii_cabinet_671",
          "class": "junkman\\components\\locations\\AdjacentDoorOpen"
        }
      }
    }
  ],
  "junkman_skills": [
    {
      "name": "rest",
      "title": "Отдых",
      "description": "Позволяет восстановить силы",
      "definition": "Восстанавливает Х здоровья и уменьшает усталость на Х, где Х - значение регенерации",
      "class": "junkman\\components\\skills\\SkillRest",
      "frequency": [],
      "parameters": {
        "default_health_regen": {
          "name": "default_health_regen",
          "value": 1
        }
      }
    },
    {
      "name": "search",
      "title": "Поиск",
      "description": "Позволяет порыться в попытках найти хоть что-нибудь",
      "definition": "Позволяет найти дополнительные артефакты",
      "class": "junkman\\components\\skills\\SkillSearch",
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "tiredness",
      "title": "Усталость",
      "description": "Усталость",
      "definition": "Каждые 5 ед. усталости отнимает 1 ед. жизни, каждые 5 отнятые ед. жизни увеличичвают усталость на 1 ед.",
      "class": "junkman\\components\\skills\\SkillTiredness",
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "spike_thrower",
      "title": "Гвоздомёт",
      "description": "Внешне это довольно компактный агрегат оранжевого цвета с серой рукоятью. Кнопка выстрела, видимо, не исправна, т.к. нажимается с большим трудом и, судя по всему, каждый запуск лишь ухудшает положение. Эта штуковина продляет вашу жизнь исключительно укорачиванием чужой жизни. Вбивайте гвозди в чужой гроб, пока не вбили в ваш!",
      "definition": "Первый гвоздь отнимает 1 ед. чужой жизни и добавляет вам 1 ед. усталости, каждый последующий - наносит на 1 ед. больше и прибавляет на 1 ед. больше усталости.",
      "class": "junkman\\components\\skills\\SkillSpikeThrower",
      "frequency": [1,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95],
      "parameters": {
        "resource": {
          "name": "resource",
          "title": "12 гвоздей",
          "value": 12
        }
      }
    }
  ],
  "fields": [
    {
      "name": "location_name",
      "type": "string",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": "@oneof(butterfly_nii_stage_6_hall,butterfly_nii_cabinet_671)"
    },
    {
      "name": "parameters",
      "type": "array",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": {
        "health": {
          "name": "health",
          "value": 100
        },
        "health_max": {
          "name": "health_max",
          "value": 100
        },
        "health_regeneration": {
          "name": "health_regeneration",
          "value": 1
        },
        "attack": {
          "name": "attack",
          "value": 1
        },
        "attack_max": {
          "name": "attack_max",
          "value": 1
        },
        "defense": {
          "name": "defense",
          "value": 1
        },
        "defense_max": {
          "name": "defense_max",
          "value": 1
        },
        "move": {
          "name": "move",
          "value": 1
        },
        "move_speed": {
          "name": "move_speed",
          "value": 1
        },
        "critical_chance": {
          "name": "critical_chance",
          "value": 5
        },
        "critical_multiple": {
          "name": "critical_multiple",
          "value": 20
        },
        "tiredness": {
          "name": "tiredness",
          "value": 0
        }
      }
    }
  ],
  "parsers": [
    {
      "name": "one_of__comma",
      "title": "One of",
      "description": "Get on value of a list",
      "class": "extas\\components\\parsers\\ParserOneOf",
      "value": "oneof",
      "condition": "~",
      "parameters": {
        "pattern": {
          "name": "pattern",
          "title": "Паттерн",
          "description": "Паттерн для поиска в значении списка для замены.",
          "value": "/\\@oneof\\((.*)\\)/"
        },
        "delimiter": {
          "name": "delimiter",
          "title": "Разделитель",
          "description": "Разделитель элементов в списке для замены.",
          "value": ","
        }
      }
    }
  ],
  "jsonrpc_operations": [
    {
      "name": "junkman.skill.add",
      "title": "Junkman add skill",
      "description": "Add a skill to a junkman",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanAddSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.skill.remove",
      "title": "Junkman remove skill",
      "description": "Remove a skill from a junkman",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanRemoveSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.skill.use",
      "title": "Junkman use skill",
      "description": "Use any junkman skill, but be careful!",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanUseSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.search",
      "title": "Search something...",
      "description": "Try to search something around",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanSearch",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.where",
      "title": "Where are you",
      "description": "Look around",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanWhere",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "current_title": {
              "type": "string"
            },
            "current_about": {
              "type": "string"
            },
            "adjacent": {
              "type": "array",
              "properties": {
                "item": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.move",
      "title": "Move between locations",
      "description": "Move to another location",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanMove",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "adjacent_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "current_title": {
              "type": "string"
            },
            "current_about": {
              "type": "string"
            },
            "adjacent": {
              "type": "array",
              "properties": {
                "item": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  ]
}