{
  "name": "junkman/api",
  "package_classes": [
    {
      "class": "junkman\\components\\JunkmanRepository",
      "interface": "junkman\\interfaces\\IJunkmanRepository"
    },
    {
      "class": "junkman\\components\\JunkmanRepository",
      "interface": "junkmanRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillRepository",
      "interface": "junkman\\interfaces\\skills\\ISkillRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillRepository",
      "interface": "skillRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillSampleRepository",
      "interface": "junkman\\interfaces\\skills\\ISkillSampleRepository"
    },
    {
      "class": "junkman\\components\\skills\\SkillSampleRepository",
      "interface": "skillSampleRepository"
    },
    {
      "class": "junkman\\components\\locations\\LocationRepository",
      "interface": "junkman\\interfaces\\locations\\ILocationRepository"
    },
    {
      "class": "junkman\\components\\locations\\LocationRepository",
      "interface": "locationRepository"
    },
    {
      "class": "junkman\\components\\contents\\ContentsItemRepository",
      "interface": "junkman\\interfaces\\contents\\IContentsItemRepository"
    },
    {
      "class": "junkman\\components\\contents\\ContentsItemRepository",
      "interface": "contentsItemRepository"
    },
    {
      "class": "junkman\\components\\using\\UserRepository",
      "interface": "junkmanUserRepository"
    },
    {
      "class": "junkman\\components\\using\\UsableRepository",
      "interface": "junkmanUsableRepository"
    }
  ],
  "plugins": [
    {
      "class": [
        "junkman\\components\\plugins\\PluginInstallJunkmen",
        "junkman\\components\\plugins\\PluginInstallSkills",
        "junkman\\components\\plugins\\PluginInstallSkillsSamples",
        "junkman\\components\\plugins\\PluginInstallLocations",
        "junkman\\components\\plugins\\PluginInstallContentsItems"
      ],
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginFieldsDefaults",
      "stage": "junkman.self.init"
    },
    {
      "class": "junkman\\components\\expands\\junkman\\JunkmanItems",
      "stage": "expand.index.junkman"
    },
    {
      "class": "junkman\\components\\plugins\\using\\PluginRecordUsing",
      "stage": [
        "extas.junkmen.create.after",
        "extas.skills.create.after",
        "extas.contents_items.create.after",
        "extas.locations.create.after"
      ]
    }
  ],
  "extensions": [
    {
      "class": "extas\\components\\extensions\\ExtensionRepositoryGet",
      "interface": "extas\\interfaces\\extensions\\IExtensionRepositoryGet",
      "subject": "*",
      "methods": [
        "skillRepository",
        "skillSampleRepository",
        "junkman\\interfaces\\skills\\ISkillRepository",
        "junkmanRepository",
        "junkman\\interfaces\\IJunkmanRepository",
        "locationRepository",
        "junkman\\interfaces\\locations\\ILocationRepository",
        "junkmanUserRepository",
        "junkmanUsableRepository",
        "contentsItemRepository"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionHealth",
      "interface": "junkman\\interfaces\\extensions\\IExtensionHealth",
      "subject": "junkman.self",
      "methods": [
        "getCurrentHealth",
        "getCurrentHealthRegeneration",
        "getMaxHealth",
        "getLostHealth",
        "incHealth",
        "decHealth",
        "incMaxHealth",
        "decMaxHealth",
        "incHealthRegeneration",
        "decHealthRegeneration",
        "isDead"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionMoveToLocation",
      "interface": "junkman\\interfaces\\extensions\\IExtensionMoveToLocation",
      "subject": "junkman.self",
      "methods": [
        "moveToLocation"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionStory",
      "interface": "junkman\\interfaces\\extensions\\IExtensionStory",
      "subject": "*",
      "methods": ["tellStory", "getStory"]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionOccupied",
      "interface": "junkman\\interfaces\\extensions\\IExtensionOccupied",
      "subject": "junkman.contents.item",
      "methods": [
        "incXOccupied", "incYOccupied", "incZOccupied",
        "decXOccupied", "decYOccupied", "decZOccupied",
        "incSizeOccupied", "decSizeOccupied"
      ]
    },
    {
      "class": "junkman\\components\\extensions\\actions\\ActionJunkmanTake",
      "interface": "junkman\\interfaces\\extensions\\actions\\IActionJunkmanTake",
      "subject": ["junkman.self", "junkman.location"],
      "methods": ["take"]
    },
    {
      "class": "junkman\\components\\extensions\\ExtensionHasTakeHash",
      "interface": "junkman\\interfaces\\extensions\\IExtensionHasTakeHash",
      "subject": "*",
      "methods": ["getTakeHash", "setTakeHash"]
    }
  ],
  "junkman_locations": [
    {
      "name": "butterfly_nii_cabinet_671",
      "title": "Кабинет №671 заброшенного НИИ 'Бабочка'",
      "description": "Довольно просторный кабинет с множеством тумбочек и шкафов. Наверное, там есть чем поживиться!",
      "parameters": {
        "f_min": {
          "name": "f_min",
          "value": 0
        },
        "f_max": {
          "name": "f_max",
          "value": 50
        }
      },
      "adjacent_locations": {
        "butterfly_nii_stage_6_hall": {
          "location_name": "butterfly_nii_stage_6_hall",
          "class": "junkman\\components\\locations\\AdjacentDoorOpen"
        }
      }
    },
    {
      "name": "butterfly_nii_stage_6_hall",
      "title": "Холл 6 этажа заброшенного НИИ 'Бабочка'",
      "description": "Узкий коридор с облупившейся краской на стенах, пара уцелевших ламп мерцают, подпитываемые непонятно каким генератором.",
      "parameters": {
        "f_min": {
          "name": "f_min",
          "value": 100
        },
        "f_max": {
          "name": "f_max",
          "value": 200
        }
      },
      "adjacent_locations": {
        "butterfly_nii_cabinet_671": {
          "location_name": "butterfly_nii_cabinet_671",
          "class": "junkman\\components\\locations\\AdjacentDoorOpen"
        }
      }
    }
  ],
  "junkman_items": [
    {
      "name": "spike_thrower",
      "title": "Гвоздомёт",
      "description": "Внешне это довольно компактный агрегат оранжевого цвета с серой рукоятью. Кнопка выстрела, видимо, не исправна, т.к. нажимается с большим трудом и, судя по всему, каждый запуск лишь ухудшает положение. Эта штуковина продляет вашу жизнь исключительно укорачиванием чужой жизни. Вбивайте гвозди в чужой гроб, пока не вбили в ваш!",
      "size_x": 2,
      "size_y": 1,
      "size_z": 1,
      "weight": 1,
      "value": 12,
      "definition": "Первый гвоздь отнимает 1 ед. чужой жизни и добавляет вам 1 ед. усталости, каждый последующий - наносит на 1 ед. больше и прибавляет на 1 ед. больше усталости.",
      "frequency": [1,5,10,15,20,25,30,35,40,45,50],
      "skills": ["use_spike_thrower"],
      "class": "junkman\\components\\contents\\items\\SpikeThrower",
      "player_name": ""
    }
  ],
  "junkman_skills": [
    {
      "name": "rest",
      "title": "Отдых",
      "description": "Позволяет восстановить силы",
      "definition": "Восстанавливает Х здоровья и уменьшает усталость на Х, где Х - значение регенерации",
      "class": "junkman\\components\\skills\\SkillRest",
      "can_damage_another": false,
      "frequency": [],
      "parameters": {
        "default_health_regen": {
          "name": "default_health_regen",
          "value": 1
        }
      }
    },
    {
      "name": "search",
      "title": "Поиск",
      "description": "Позволяет порыться в попытках найти хоть что-нибудь",
      "definition": "Позволяет найти дополнительные артефакты",
      "class": "junkman\\components\\skills\\SkillSearch",
      "can_damage_another": false,
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "tiredness",
      "title": "Усталость",
      "description": "Усталость",
      "definition": "Каждые 5 ед. усталости отнимает 1 ед. жизни, каждые 5 отнятые ед. жизни увеличичвают усталость на 1 ед.",
      "class": "junkman\\components\\skills\\SkillTiredness",
      "can_damage_another": false,
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "punch",
      "title": "Удар кулаком",
      "description": "Если вас ударили по левой щеке, то подставьте правую...ногу, присядьте и бейте снизу.",
      "definition": "Отнимает Х здоровья у цели, где Х - ваш уровень атаки.",
      "class": "junkman\\components\\skills\\SkillPunch",
      "can_damage_another": true,
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "kick",
      "title": "Удар ногой",
      "description": "Вы и по стене в упор попасть не можете, но попытайтесь пнуть соперника.",
      "definition": "Отнимает Х здоровья у цели, где Х - ваш уровень атаки.",
      "class": "junkman\\components\\skills\\SkillKick",
      "can_damage_another": true,
      "frequency": [],
      "parameters": {}
    },
    {
      "name": "use_spike_thrower",
      "title": "Выстрелить из гвоздомёта",
      "description": "Попытаться нажать на проржавевший курок и выпустить гвоздь в цель.",
      "definition": "Первый гвоздь отнимает 1 ед. чужой жизни и добавляет вам 1 ед. усталости, каждый последующий - наносит на 1 ед. больше и прибавляет на 1 ед. больше усталости.",
      "class": "junkman\\components\\skills\\SkillSpikeThrower",
      "frequency": [],
      "can_damage_another": true,
      "parameters": {}
    }
  ],
  "fields": [
    {
      "id": "@uuid6",
      "name": "contents_items",
      "type": "array",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": []
    },
    {
      "id": "@uuid6",
      "name": "class",
      "type": "string",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": "junkman\\components\\persons\\Unknown"
    },
    {
      "id": "@uuid6",
      "name": "contents_items_max",
      "type": "int",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": 4
    },
    {
      "id": "@uuid6",
      "name": "location_name",
      "type": "string",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": "@oneof(butterfly_nii_stage_6_hall,butterfly_nii_cabinet_671)"
    },
    {
      "id": "@uuid6",
      "name": "skills",
      "type": "array",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": ["rest", "tiredness", "punch", "kick", "search"]
    },
    {
      "id": "@uuid6",
      "name": "parameters",
      "type": "array",
      "parameters": {
        "subject": {
          "name": "subject",
          "value": "junkman.self"
        }
      },
      "value": {
        "health": {
          "name": "health",
          "value": 100
        },
        "health_max": {
          "name": "health_max",
          "value": 100
        },
        "health_regeneration": {
          "name": "health_regeneration",
          "value": 1
        },
        "attack": {
          "name": "attack",
          "value": 1
        },
        "attack_max": {
          "name": "attack_max",
          "value": 1
        },
        "defense": {
          "name": "defense",
          "value": 1
        },
        "defense_max": {
          "name": "defense_max",
          "value": 1
        },
        "move": {
          "name": "move",
          "value": 1
        },
        "move_speed": {
          "name": "move_speed",
          "value": 1
        },
        "critical_chance": {
          "name": "critical_chance",
          "value": 5
        },
        "critical_multiple": {
          "name": "critical_multiple",
          "value": 20
        },
        "tiredness": {
          "name": "tiredness",
          "value": 0
        }
      }
    }
  ],
  "parsers": [
    {
      "name": "one_of__comma",
      "title": "One of",
      "description": "Get on value of a list",
      "class": "extas\\components\\parsers\\ParserOneOf",
      "value": "oneof",
      "condition": "~",
      "parameters": {
        "pattern": {
          "name": "pattern",
          "title": "Паттерн",
          "description": "Паттерн для поиска в значении списка для замены.",
          "value": "/\\@oneof\\((.*)\\)/"
        },
        "delimiter": {
          "name": "delimiter",
          "title": "Разделитель",
          "description": "Разделитель элементов в списке для замены.",
          "value": ","
        }
      }
    }
  ],
  "jsonrpc_operations": [
    {
      "name": "junkman.skill.add",
      "title": "Junkman add skill",
      "description": "Add a skill to a junkman",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanAddSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.item.use",
      "title": "Use an item",
      "description": "Use any item",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanItemUse",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "from_name": {
              "type": "string"
            },
            "item_name": {
              "type": "string"
            },
            "to_name": {
              "type": "string"
            },
            "to_item": {
              "type": "string"
            },
            "action": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.use",
      "title": "Use anything",
      "description": "Use anything you have or found",
      "method": "",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanUse",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "who": {
              "type": "string"
            },
            "what": {
              "type": "string"
            },
            "action": {
              "type": "string"
            },
            "args": {
              "type": "object"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            }
          }
        }
      }
    },
    {
      "name": "junkman.fight",
      "title": "Junkman add skill",
      "description": "Add a skill to a junkman",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanFight",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "attacker_name": {
              "type": "string"
            },
            "defender_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "attacker_name": {
              "type": "string"
            },
            "attacker": {
              "type": "string"
            },
            "defender_name": {
              "type": "string"
            },
            "defender": {
              "type": "string"
            }
          }
        }
      }
    },
    {
      "name": "junkman.skill.remove",
      "title": "Junkman remove skill",
      "description": "Remove a skill from a junkman",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanRemoveSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.skill.use",
      "title": "Junkman use skill",
      "description": "Use any junkman skill, but be careful!",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanUseSkill",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "skill_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.search",
      "title": "Search something...",
      "description": "Try to search something around",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanSearch",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "skills": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "mixed"
                    }
                  }
                }
              }
            },
            "parameters": {
              "type": "array",
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "mixed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.where",
      "title": "Where are you",
      "description": "Look around",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanWhere",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "current_title": {
              "type": "string"
            },
            "current_about": {
              "type": "string"
            },
            "adjacent": {
              "type": "array",
              "properties": {
                "item": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "junkman.move",
      "title": "Move between locations",
      "description": "Move to another location",
      "method": "update",
      "item_name": "",
      "item_class": "",
      "item_repo": "",
      "class": "junkman\\components\\jsonrpc\\JunkmanMove",
      "spec": {
        "request": {
          "type": "object",
          "properties": {
            "junkman_name": {
              "type": "string"
            },
            "adjacent_name": {
              "type": "string"
            }
          }
        },
        "response": {
          "type": "array",
          "properties": {
            "story": {
              "type": "string"
            },
            "current_title": {
              "type": "string"
            },
            "current_about": {
              "type": "string"
            },
            "adjacent": {
              "type": "array",
              "properties": {
                "item": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  ]
}